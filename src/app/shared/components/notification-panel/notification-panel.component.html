<p-drawer
  [(visible)]="visible"
  position="right"
  [style]="{ width: '400px' }"
  (onShow)="onShow()"
  (onHide)="onHide()"
>
  <ng-template pTemplate="header">
    <div class="panel-header">
      <h3>Notifications</h3>
      @if (notifications.length > 0) {
      <p-button
        label="Mark all read"
        [text]="true"
        size="small"
        (click)="markAllAsRead()"
      ></p-button>
      }
    </div>
  </ng-template>

  <div class="notification-list">
    @if (loading) {
    <div class="loading-state">
      <i class="pi pi-spin pi-spinner"></i>
      <span>Loading notifications...</span>
    </div>
    } @else if (notifications.length === 0) {
    <div class="empty-state">
      <i class="pi pi-bell-slash"></i>
      <span>No notifications</span>
    </div>
    } @else { @for (notification of notifications; track notification.id) {
    <div
      class="notification-item"
      [class.unread]="!notification.isRead"
      [ngClass]="getNotificationClass(notification.type)"
      (click)="markAsRead(notification)"
    >
      <div class="notification-icon">
        <i [class]="getNotificationIcon(notification.type)"></i>
      </div>
      <div class="notification-content">
        <div class="notification-title">{{ notification.title }}</div>
        <div class="notification-message">{{ notification.message }}</div>
        <div class="notification-time">{{ formatDate(notification.createdAt) }}</div>
      </div>
      @if (!notification.isRead) {
      <div class="unread-indicator"></div>
      }
    </div>
    } }
  </div>
</p-drawer>
